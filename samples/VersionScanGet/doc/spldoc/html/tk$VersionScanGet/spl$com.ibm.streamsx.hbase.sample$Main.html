<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="reference"/>
<meta name="DC.Title" content="SPL File Main.spl"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="spldoc_compilationunit"/>
<link rel="stylesheet" type="text/css" href="../../html/commonltr.css"/>
<link rel="stylesheet" type="text/css" href="../../html/spldoc.css"/>
<title>SPL File Main.spl</title>
</head>
<body id="spldoc_compilationunit">


<h1 class="title topictitle1">SPL File <tt class="ph tt">Main.spl</tt></h1>

<div class="body refbody">
<div class="section">
<p class="p">
<a class="xref" href="../toolkits/toolkits.html">Toolkits</a> &gt; <a class="xref" href="tk$VersionScanGet.html">VersionScanGet 1.0.1</a> &gt; <a class="xref" href="ns$com.ibm.streamsx.hbase.sample.html">com.ibm.streamsx.hbase.sample</a> &gt; Main.spl</p>

</div>

<div class="section"><h2 class="title sectiontitle splhead-1">Content</h2>
  
    <dl class="dl">
    <dt class="dt dlterm"/>
<dd class="dd"/>

    
      <dt class="dt dlterm splhead-2">Composite Operators</dt>

      <dd class="dd"><ul class="sl simple">
<li class="sli"><strong class="ph b"><a class="xref" href="#spldoc_compilationunit__composite_operator__MultipleVersions">composite MultipleVersions</a></strong>: This sample demonstrates how to return multiple versions with HBASEGet in Record mode.
</li>

     </ul>
</dd>

    
     </dl>

</div>

<div class="section"><h2 class="title sectiontitle splhead-1">Composite Operators</h2>
  
</div>

<div class="section" id="spldoc_compilationunit__composite_operator__MultipleVersions"><h2 class="title sectiontitle splpart">composite MultipleVersions</h2>
  
</div>

<div class="section">

<p class="p">This sample demonstrates how to return multiple versions with HBASEGet in Record mode.  
</p>

<p class="p">To run this sample, you must have created the table streamsSample_version.  In HBASE shell, do create 'streamsSample_version','all'
</p>

<p class="p">The first two operators just load the table, so then we can start doing the interesting queries. After loading, each cell in the table has three entries (this the default max per table.)
</p>

<div class="p">To see how maxVersions works, compile and run the the program.  
<ul class="ul">
<li class="li"> In getRecord_unlimitedA.out, you'll see three entries in the list for columnQualifier austen.</li>

<li class="li"> In getRecord_twoB.out, you'll see two entries in the list for columnQualifier Bronte.  Notice that </li>

</ul>
while the attribute name corrsponding ot the list of values matters, we can use any name we like for the attributes of the tuples that make up that list.
<ul class="ul">
<li class="li"> In getRecord_timestampC.out, you'll see three entries in the list for columnQualifier chaucer.</li>

</ul>

</div>

<p class="p"><strong class="ph b">Exploring the Timestamp</strong> To see what the timestamp parameter can do, you can run this application again, setting the timestamp explicitly as an submission-time parameter.  Look in your getRecord_timestampC.out file, and pick the tuple_v2 timestamp out. Now run:  &lt;code&gt;output/bin/standalone populate=false minTimestamp=&lt;timestamp&gt;&lt;/code&gt; eg, if your getRecord_timestampC.out file is &lt;code&gt;"versionTest",3,{austen="entry_v3",bronte="entry_v3",chaucer=[{entry="entry_v3",time=1399407664460},{entry="entry_v2",time=1399407664452},{entry="entry_v1",time=1399407664445}]}&lt;/code&gt; run  &lt;code&gt;output/bin/standalone  minTimestamp=1399407664452 populate=false&lt;/code&gt;
</p>

<p class="p"> If you are running from eclipse, it will probably be easier to change the 0 to that timestamp in: &lt;code&gt; expression&lt;int64&gt; $minTimestamp :(int64) getSubmissionTimeValue("minTimestamp", "0") ;&lt;/code&gt;
</p>

<p class="p">Now when you look at the readVersions_timestampC.out file, you'll see that only the versions 3 and 2 of the chaucer columnQualifier appear. 
</p>

</div>

<div class="section"><h2 class="title sectiontitle">Parameters</h2>

<ul class="sl simple">
<li class="sli"><strong class="ph b">minTimestamp</strong>: 
</li>

<li class="sli"><strong class="ph b">populate</strong>: 
</li>

<li class="sli"><strong class="ph b">tableName</strong>: 
</li>

<li class="sli"><strong class="ph b">readDelay</strong>: 
</li>

</ul>

</div>

<div class="section">
</div>

<div class="section">
</div>

<div class="section"><h2 class="title sectiontitle splhead-2">Composite Operator Graph</h2>
  
</div>

<div class="section splgraph">
<object type="image/svg+xml" data="../../image/tk$VersionScanGet/op$com.ibm.streamsx.hbase.sample$MultipleVersions.svg" width="118" height="199">
<span>SPL composite operator image not displayed. Problem loading file: ../../image/tk$VersionScanGet/op$com.ibm.streamsx.hbase.sample$MultipleVersions.svg
</span>
</object>
</div>

</div>


</body>
</html>