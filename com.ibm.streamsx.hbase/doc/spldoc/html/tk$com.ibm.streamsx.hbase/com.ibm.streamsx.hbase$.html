<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="reference"/>
<meta name="DC.Title" content="Namespace com.ibm.streamsx.hbase"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="spldoc_namespace__"/>
<link rel="stylesheet" type="text/css" href="../../html/commonltr.css"/>
<link rel="stylesheet" type="text/css" href="../../html/spldoc.css"/>
<title>Namespace com.ibm.streamsx.hbase</title>
</head>
<body id="spldoc_namespace__">


<h1 class="title topictitle1">Namespace <tt class="ph tt">com.ibm.streamsx.hbase</tt></h1>


<div class="body refbody"><div class="abstract">
</div>

<div class="section">
<p class="p">
<a class="xref" href="../toolkits/toolkits.html">IBMStreams com.ibm.streamsx.hbase Toolkit</a> &gt; <a class="xref" href="com.ibm.streamsx.hbase.html">com.ibm.streamsx.hbase 1.2.0.commit_dcbdcd3</a> &gt; com.ibm.streamsx.hbase</p>

</div>

<div class="section">

<p class="p">This file describes how to get started using HBASE and Streams with this toolkit. 
</p>

<p class="p"><a class="xref" href="https://hbase.apache.org/">Apache HBASE</a> is non-relational database modeled  after Google's BigTable. It is highly scalable, but does not have some of the  features that come with a standard relational database. 
</p>

<p class="p"><strong class="ph b">Getting HBASE</strong> This toolkit requires that HBASE already be installed and running on your system. HBASE, in turn, requires <a class="xref" href="http://hadoop.apache.org/">HDFS</a> and <a class="xref" href="http://zookeeper.apache.org/">Zookeeper</a>. If you are working from a BigInsights installation, all of these are installed as part of that.  If not, see their documentation for how to download, setup, and install. 
</p>

<p class="p"><em class="ph i">Note: The host on which Streams is installed must be able to communicate with the hosts where HBASE is installed, but you do not need both on the same host.</em>  
</p>

<p class="p">This toolkit was tested against HBASE v0.94, but probably will work against newer versions. 
</p>

<p class="p"><strong class="ph b">Setup</strong> The toolkit needs certain libraries from HBASE to compile.  At runtime, it needs some IP and port information to connect. 
</p>

<p class="p">For the toolkit to find what it needs, set the environment variable HBASE_HOME to point to the  directory containing HBASE (ie, the directory one step above conf and bin).  You'll likewise need to set HADOOP_HOME to point to the directory containing hadoop.  Again, this is the directory one step up from conf and bin. In BigInsights, it's <tt class="ph tt">IHC</tt>. 
</p>

<p class="p"><em class="ph i">If streams is not a host containing the HBASE</em> then first copy the entire HBASE_HOME and HADOOP_HOME to a place accessible to streams.  The operators need both the config files from the conf directory and some of the jars under those directories. 
</p>

<p class="p"><strong class="ph b">Building the toolkit</strong> Once you have set the HBASE_HOME and HADOOP_HOME environment variables, you can build the toolkit by typing ant either in the top-level directory or in the toolkit directory.  If you cloned the repository from github, or downloaded the zip file or archive, then you must do this step, as otherwise there is none of the toolkit artifacts (toolkit.xml, operator xml files, etc) that Streams needs. 
</p>

<p class="p"><strong class="ph b">Using the toolkit</strong> The <a class="xref" href="com.ibm.streamsx.hbase:overview.spl">com.ibm.streamsx.hbase:overview.spl</a> contains an overall description of the toolkit.  To see the operators in action, look at the samples.  <tt class="ph tt">PutRecord</tt> uses HBASE to store book information, and <tt class="ph tt">PutSample</tt> stores information about characters in a book.  In both cases, you'll need to create the table before running the app, so be sure to read  the comment. 
</p>

<p class="p"><strong class="ph b">Viewing tuples in HBASE</strong> One very useful tool for debugging is the hbase shell.  To run it, you must be on a HBASE host (ie,  just copying over the files works for streams, but won't work here), and then run <tt class="ph tt">$HBASE_HOME/bin/hbase shell</tt> You'll use the shell to create tables and view their status. 
</p>

</div>

<div class="section">

<p class="p">A set of operators for writing to and reading from Apache HBASE. 
</p>

<p class="p">These operators attempt to follow the HBASE interface as closely as is feasible to give the developer maximum flexibility in interacting with HBASE. 
</p>

<p class="p">HBASE is a BigTable-like key-value store build on top of HDFS.  Tables are partitioned by rows across clusters.   
</p>

<p class="p">An value in an HBASE table is accessed with row, columnFamily,  columnQualifier, and timestamp.  Usually the timestamp is  left out, and only the latest value is returned.  This toolkit currently provides no support related to timestamps. 
</p>

<p class="p">The columnFamily and columnQualifier can collectively be thought of as  a column and are sometimes called that in the APIs.  The separation of the  column into two parts allows for some extra flexibility: the columnFamilies  must be defined when the table established and may be limited, but new  columnQualifiers can be added at runtime and there is no limit to their number. 
</p>

<p class="p">For some operators, such as <a class="xref" href="com.ibm.streamsx.hbase$HBASEPut.html">HBASEPut</a>, the row, columnFamily, columnQualifer, and value must all be specified.  For other operators, such as <a class="xref" href="com.ibm.streamsx.hbase$HBASEGet.html">HBASEGet</a> and  <a class="xref" href="com.ibm.streamsx.hbase$HBASEDelete.html">HBASEDelete</a>, the behavior depends on exactly which of those are specified. <a class="xref" href="com.ibm.streamsx.hbase$HBASEDelete.html">HBASEDelete</a>, for example, will delete the whole row if columnFamily and  columnQualifier are not specified, but can also be used to delete only a single value. 
</p>

<p class="p">The columnFamily and columnQualifier (when relevant) may either be specified as an attribute of the input tuple (columnFamilyAttrName, columnQualifierAttrName), or specified as a single string to be used for all tuples (staticColumnFamily,  staticColumnQualifier).  The the row and the value (when needed) come from the  input tuple. 
</p>

<p class="p">Please see the individual operators for details: 
</p>

<ul class="ul">
<li class="li"> <a class="xref" href="com.ibm.streamsx.hbase$HBASEPut.html">HBASEPut</a> Put a tuple into HBASE. </li>

<li class="li"> <a class="xref" href="com.ibm.streamsx.hbase$HBASEGet.html">HBASEGet</a> Get a value, the set of values in a row-columnFamily-columnQualifier triple, or the set of values in a row-columnFamily, or all values in a named row. </li>

<li class="li"> <a class="xref" href="com.ibm.streamsx.hbase$HBASEScan.html">HBASEScan</a> Scan the entire table, getting all rows.  The scan can be limited to a particular set of rows and to a particular set of columnFamilies or columnFamily-columnQualifier combos. </li>

<li class="li"> <a class="xref" href="com.ibm.streamsx.hbase$HBASEIncrement.html">HBASEIncrement</a> Increment an entry.  The increment can come from the tuple or an operator parameter. </li>

<li class="li"> <a class="xref" href="com.ibm.streamsx.hbase$HBASEDelete.html">HBASEDelete</a> Delete a row, a columnFamily within a row, or a columnFamily-columnQualifier in a row. </li>

</ul>

<p class="p"> HBASE supports locking via a check-and-update mechanism for delete and put.  This only locks within a single row, but allows the user to specify either 
</p>

<ul class="ul">
<li class="li"> a full entry (row, columnFamily, columnQualifier, value), if this entry exists with the given value, make the pure or delete. </li>

<li class="li"> a partial entry (row, columnFamily, columnQualifier): if there is no value, make the update. </li>

</ul>

<p class="p"> (Note that the row of the put or delete and the row of the check must be the same.) These are supported by <a class="xref" href="com.ibm.streamsx.hbase$HBASEPut.html">HBASEPut</a> and <a class="xref" href="com.ibm.streamsx.hbase$HBASEDelete.html">HBASEDelete</a> by specifying a checkAttrName as a parameter. This attribute on the input stream must be of type tuple and have an attribute of columnFamily and columnQualifier (with a value if doin the first type of check).  In this mode, the operator can have an output port with a success attribute to indicate whether the put or delete happened. 
</p>

<p class="p">Except for HBASEIncrement and HBASEGet, the only types currently supported are rstrings.  HBASEGet supports getting a value of type long.   
</p>

<p class="p">The sample applications were constructed to demonstrate the various use cases. 
</p>

</div>

<div class="section"><h2 class="title sectiontitle splhead-1">Operators</h2>
  
<ul class="sl simple">
<li class="sli"><strong class="ph b"><a class="xref" href="com.ibm.streamsx.hbase$HBASEDelete.html">HBASEDelete</a></strong>: Delete an entry, an entire row, a columnFamily in a row, or a columnFamily, columnQualifier pair in a row from HBASE, with optional checkAndDelete.
</li>

<li class="sli"><strong class="ph b"><a class="xref" href="com.ibm.streamsx.hbase$HBASEGet.html">HBASEGet</a></strong>: Get tuples from HBASE; similar to enrich from database operators.
</li>

<li class="sli"><strong class="ph b"><a class="xref" href="com.ibm.streamsx.hbase$HBASEIncrement.html">HBASEIncrement</a></strong>: Increment the specified HBASE entry.
</li>

<li class="sli"><strong class="ph b"><a class="xref" href="com.ibm.streamsx.hbase$HBASEPut.html">HBASEPut</a></strong>: Put tuples in HBASE, with support for checkAndPut.
</li>

<li class="sli"><strong class="ph b"><a class="xref" href="com.ibm.streamsx.hbase$HBASEScan.html">HBASEScan</a></strong>: Scan an HBASE table.
</li>

</ul>

</div>

</div>


</body>
</html>